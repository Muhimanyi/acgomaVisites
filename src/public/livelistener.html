<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signalisation ACGOMA</title>
    <link rel="stylesheet" href="assets/css/output.css">
    <script src="assets/js/jquery.js"></script>
        <script src="https://acgomavisites.onrender.com/socket.io/socket.io.js"></script>

</head>

<body
    style="background-image: url('live_audio.jpg'); background-size: cover ; display:flex;  align-items: center; width: 100%; height: 100vh; justify-content: center;">
    <div class="justify-center block gap-2 text-center">
        <div class="flex justify-center items-center" style="justify-content: center; align-items: end;">
            <svg onclick="playaudio()" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                class="m-auto text-white border rounded-full bg-violet-700" style="height: 40%; width:40%; margin:auto;
            ">
                <path fill-rule="evenodd"
                    d="M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z"
                    clip-rule="evenodd" />
            </svg>
            <p class="absolute font-bold" style="position: absolute; font-size: 48px;">Play On Line Audio</p>
        </div>
        <p class="text-4xl font-bold"
            style="font-family: Verdana, Geneva, Tahoma, sans-serif; font-size:x-large; color:white; text-shadow: rgb(43, 92, 226) 1px 0px 5px; ">
            ASSEMBLEE CHRETIENNE DE GOMA TMK - WEB-RADIO
            <audio id="audio" src="" controls autoplay class="m-auto" style="margin:auto"></audio>
        </p>
    </div>


    <script>

        const socket = io();
        socket.on('liveAudio', (data) => {
            console.log(data)
            $("body").show()
            const audio = document.getElementById("audio");
            audio.src = data;
            audio.play();
        });


        socket.on('links', (data) => {
            const audio = document.getElementById("audio");
            audio.src = data.links.lien;
            audio.play();
            console.log(data+'playing')
        })


        function playaudio() {
            const audio = document.getElementById("audio");
            if (audio.src) {
                audio.play();
            } else {
                console.error("No audio source available.");
            }
        }
    </script>
</body>

</html>
